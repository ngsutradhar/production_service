"use strict";(self.webpackChunkadminDesign=self.webpackChunkadminDesign||[]).push([[1640],{1640:(T,f,a)=>{a.r(f),a.d(f,{AllIncomeReportModule:()=>q});var i=a(6895),m=a(4006),s=a(4144),g=a(9602),S=a(3238),t=a(4650);let A=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({}),o})();var h=a(7466),_=a(5593),r=a(1740),e=a(585),L=a(8177),b=a(5722),Z=a(4076),C=a(2210),D=a(4364),E=a(5620),P=a(2820),I=a(9549),w=a(805);function x(o,l){1&o&&(t.TgZ(0,"mat-error",19),t._uU(1," Start is required"),t.qZA())}function y(o,l){if(1&o&&(t.TgZ(0,"div"),t.YNc(1,x,2,0,"mat-error",18),t.qZA()),2&o){const n=t.oxw();t.xp6(1),t.Q6J("ngIf",n.allIncomeReportFormGroup.controls.start_date.errors.required)}}function M(o,l){1&o&&(t.TgZ(0,"mat-error",19),t._uU(1,"End is required"),t.qZA())}function U(o,l){if(1&o&&(t.TgZ(0,"div"),t.YNc(1,M,2,0,"mat-error",18),t.qZA()),2&o){const n=t.oxw();t.xp6(1),t.Q6J("ngIf",n.allIncomeReportFormGroup.controls.end_date.errors.required)}}function N(o,l){if(1&o){const n=t.EpF();t.TgZ(0,"div",27)(1,"span",28),t._UZ(2,"i",29),t.TgZ(3,"input",30),t.NdJ("input",function(u){t.CHM(n),t.oxw();const d=t.MAs(2),p=t.oxw();return t.KtG(d.filterGlobal(p.getEventValue(u),"contains"))}),t.qZA()()()}}function K(o,l){1&o&&(t.TgZ(0,"tr")(1,"th",31),t._uU(2,"Student Name "),t._UZ(3,"p-sortIcon",32),t.qZA(),t.TgZ(4,"th",33),t._uU(5,"Course Name "),t._UZ(6,"p-sortIcon",34),t.qZA(),t.TgZ(7,"th",35),t._uU(8,"Transaction Date "),t._UZ(9,"p-sortIcon",36),t.qZA(),t.TgZ(10,"th",37),t._uU(11,"Purpose "),t._UZ(12,"p-sortIcon",38),t.qZA(),t.TgZ(13,"th",39),t._uU(14,"Transaction Mode "),t._UZ(15,"p-sortIcon",40),t.qZA(),t.TgZ(16,"th",41),t._uU(17,"Fees Amount "),t._UZ(18,"p-sortIcon",42),t.qZA()())}function O(o,l){if(1&o&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.ALo(7,"date"),t.qZA(),t.TgZ(8,"td"),t._uU(9),t.qZA(),t.TgZ(10,"td"),t._uU(11),t.qZA(),t.TgZ(12,"td",19),t._uU(13),t.ALo(14,"currency"),t.qZA()()),2&o){const n=l.$implicit;t.xp6(2),t.Oqu(n.student_name),t.xp6(2),t.Oqu(n.full_name),t.xp6(2),t.Oqu(t.xi3(7,6,n.transaction_date,"dd/MM/yyyy")),t.xp6(3),t.Oqu(n.comment),t.xp6(2),t.Oqu(n.ledger_name),t.xp6(2),t.Oqu(t.xi3(14,9,n.received_amount,"INR"))}}function F(o,l){if(1&o&&(t.TgZ(0,"tr")(1,"th",43),t._uU(2,"Gross Total"),t.qZA(),t.TgZ(3,"th",19),t._uU(4),t.ALo(5,"currency"),t.qZA()()),2&o){const n=t.oxw(2);t.xp6(4),t.Oqu(t.xi3(5,1,n.totalIncome,"INR"))}}const J=function(){return["student_name","full_name","received_amount","comment","ledger_name"]};function G(o,l){if(1&o&&(t.TgZ(0,"div",20)(1,"p-table",21,22),t.YNc(3,N,4,0,"ng-template",23),t.YNc(4,K,19,0,"ng-template",24),t.YNc(5,O,15,12,"ng-template",25),t.YNc(6,F,6,4,"ng-template",26),t.qZA()()),2&o){const n=t.oxw();t.xp6(1),t.Q6J("value",n.allIncomeListArray)("globalFilterFields",t.DdM(2,J))}}const j=[{path:"",component:(()=>{class o{constructor(n,c){this.commonService=n,this.reportService=c,this.allIncomeListArray=[],this.isShowReport=!1,this.totalIncome=0,this.cols=[{field:"transaction_master_id",header:"Student To Course ID",customExportHeader:"Student To Course ID"},{field:"student_name"},{field:"full_name"},{field:"received_amount"}];const u=localStorage.getItem("user");u&&(this.UserID=JSON.parse(u).uniqueId,this.organisationId=JSON.parse(u).organisationId,console.log("user localUserID:",this.UserID),console.log("user organisationId:",this.organisationId))}ngOnInit(){const n=new Date;let c=(0,i.p6)(n,"yyyy-MM-dd","en");this.allIncomeReportFormGroup=new m.cw({start_date:new m.NI(c),end_date:new m.NI(c),searchTerm:new m.NI}),this.allIncomeListArray=[]}getEventValue(n){return n.target.value}setStartSQL(n){this.allIncomeReportFormGroup.patchValue({start_date:this.commonService.getSQLDate(n)})}setEndSQL(n){this.allIncomeReportFormGroup.patchValue({end_date:this.commonService.getSQLDate(n)})}clear(n){n.clear()}onIncomeReport(){this.isShowReport=!0,this.totalIncome=0,this.getAllIncomeObj={startDate:this.allIncomeReportFormGroup.value.start_date,endDate:this.allIncomeReportFormGroup.value.end_date,organisationId:this.organisationId},console.log(this.getAllIncomeObj),this.reportService.fetchAllIncomeReport(this.getAllIncomeObj).subscribe(n=>{this.allIncomeListArray=n.data,console.log("allIncomeListArray:",this.allIncomeListArray);for(let c of this.allIncomeListArray)this.totalIncome+=c.received_amount;console.log("Total",this.totalIncome)})}onKeyUp(n){}}return o.\u0275fac=function(n){return new(n||o)(t.Y36(E.v),t.Y36(P.r))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-all-income-report"]],decls:31,vars:9,consts:[[1,"container-fluid","page"],[1,"page__box"],[1,"control-div"],[3,"formGroup"],[1,"row","p-3"],[1,"col-sm-3"],[2,"width","100%"],["matInput","","formControlName","start_date",3,"matDatepicker","dateInput"],["refStartDate",""],[4,"ngIf"],["matSuffix","",3,"for"],["start_date",""],["matInput","","formControlName","end_date",3,"matDatepicker","dateInput"],["refEndDate",""],["end_date",""],[1,"col-sm-2"],["type","button",1,"btn","btn-primary",3,"disabled","click"],["class","page__content",4,"ngIf"],["class","text-right",4,"ngIf"],[1,"text-right"],[1,"page__content"],[3,"value","globalFilterFields"],["allIncomeList",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","footer"],[1,"p-d-flex"],[1,"p-input-icon-left","p-ml-auto"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Search keyword",3,"input"],["pSortableColumn","student_name"],["field","student_name"],["pSortableColumn","full_name"],["field","full_name"],["pSortableColumn","transaction_date"],["field","transaction_date"],["pSortableColumn","comment"],["field","comment"],["pSortableColumn","ledger_name"],["field","ledger_name"],["pSortableColumn","received_amount"],["field","received_amount"],["colspan","5"]],template:function(n,c){if(1&n){const u=t.EpF();t.TgZ(0,"div",0)(1,"div",1),t._uU(2,"Income Report "),t.qZA(),t.TgZ(3,"div",2)(4,"form",3)(5,"div",4)(6,"div",5)(7,"mat-form-field",6)(8,"mat-label"),t._uU(9,"Start Date"),t.qZA(),t.TgZ(10,"input",7,8),t.NdJ("dateInput",function(){t.CHM(u);const p=t.MAs(11);return t.KtG(c.setStartSQL(p.value))}),t.qZA(),t.YNc(12,y,2,1,"div",9),t._UZ(13,"mat-datepicker-toggle",10)(14,"mat-datepicker",null,11),t.qZA()(),t.TgZ(16,"div",5)(17,"mat-form-field",6)(18,"mat-label"),t._uU(19,"End Date"),t.qZA(),t.TgZ(20,"input",12,13),t.NdJ("dateInput",function(){t.CHM(u);const p=t.MAs(21);return t.KtG(c.setEndSQL(p.value))}),t.qZA(),t.YNc(22,U,2,1,"div",9),t._UZ(23,"mat-datepicker-toggle",10)(24,"mat-datepicker",null,14),t.qZA()(),t.TgZ(26,"div",15)(27,"button",16),t.NdJ("click",function(){return c.onIncomeReport()}),t._uU(28,"Submit"),t.qZA()()(),t._UZ(29,"div",4),t.qZA()(),t.YNc(30,G,7,3,"div",17),t.qZA()}if(2&n){const u=t.MAs(15),d=t.MAs(25);t.xp6(4),t.Q6J("formGroup",c.allIncomeReportFormGroup),t.xp6(6),t.Q6J("matDatepicker",u),t.xp6(2),t.Q6J("ngIf",c.allIncomeReportFormGroup.controls.start_date.errors&&c.allIncomeReportFormGroup.controls.start_date.touched),t.xp6(1),t.Q6J("for",u),t.xp6(7),t.Q6J("matDatepicker",d),t.xp6(2),t.Q6J("ngIf",c.allIncomeReportFormGroup.controls.end_date.errors&&c.allIncomeReportFormGroup.controls.end_date.touched),t.xp6(1),t.Q6J("for",d),t.xp6(4),t.Q6J("disabled",!c.allIncomeReportFormGroup.valid||c.allIncomeReportFormGroup.value.id),t.xp6(3),t.Q6J("ngIf",c.isShowReport)}},dependencies:[i.O5,I.TO,I.KE,I.hX,I.R9,s.Nt,g.Mq,g.hl,g.nW,m._Y,m.Fj,m.JJ,m.JL,m.sg,m.u,h.iA,w.jx,h.lQ,h.fz,r.o,i.H9,i.uU],styles:[".page[_ngcontent-%COMP%]{color:#0c0c0c;min-height:100vh}.page__box[_ngcontent-%COMP%]{font-size:2.5em;padding:10px}.control-div[_ngcontent-%COMP%]{margin-top:2.2%;width:80%;height:10vh;background-color:#b0b5b7;margin-left:10%;border-radius:10px}.page__content[_ngcontent-%COMP%]{margin-top:2.2%;width:80%;height:100vh;background-color:transparent;margin-left:10%;border-radius:10px}  .mat-form-field .mat-input-element{color:#080808;font-size:medium;font-family:Roboto,sans-serif}  .mat-form-field .mat-form-field-label{color:#0a0a0a;font-family:Roboto,sans-serif;font-size:large}  datepicker-value-example .mat-form-field-label{color:#210dd4}  .mat-datepicker-toggle{color:#43b2ee}  .mat-form-field-underline{background:#43b2ee}.mat-raised-button[_ngcontent-%COMP%]{background-color:#000}"]}),o})()}];let Q=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[D.Bz.forChild(j),D.Bz]}),o})(),q=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[i.ez,Q,s.c,g.FA,S.XK,m.UX,A,h.U$,_.hJ,r.j,e._8,L.JH,b.q4,Z.vI,C.kW]}),o})()},2820:(T,f,a)=>{a.d(f,{r:()=>A});var i=a(262),m=a(7579),s=a(8505),g=a(4650),S=a(5620),t=a(4889),R=a(529);let A=(()=>{class h{constructor(r,e,L){this.commonService=r,this.errorService=e,this.http=L,this.incomeReportList=[],this.newsDataList=[],this.incomeReportSubject=new m.x}fetchCheckMerchantTransactionId(r){return this.http.get(this.commonService.getAPI()+"/checkMerchantTransaction/"+r).pipe((0,i.K)(this.errorService.serverError),(0,s.b)(e=>{this.newsDataList=e.data}))}fetchCourseCompletedId(r){return this.http.get(this.commonService.getAPI()+"/updateCourseCompleted/"+r).pipe((0,i.K)(this.errorService.serverError),(0,s.b)(e=>{this.newsDataList=e.data}))}fetchPivotTableIncomeList(r){return this.newsDataList=[],this.http.get(this.commonService.getAPI()+"/getPivotTableIncomeListReport/"+r).pipe((0,i.K)(this.errorService.serverError),(0,s.b)(e=>{this.newsDataList=e.data}))}fetchPivotTableAdmissionList(r){return this.newsDataList=[],this.http.get(this.commonService.getAPI()+"/getPivotTableAdmissionList/"+r).pipe((0,i.K)(this.errorService.serverError),(0,s.b)(e=>{this.newsDataList=e.data}))}fetchStudentMarksList(r){return this.newsDataList=[],this.http.post(this.commonService.getAPI()+"/getMarkStudents",r).pipe((0,i.K)(this.errorService.serverError),(0,s.b)(e=>{this.newsDataList=e.data}))}fetchSubjectListByCourseId(r){return this.newsDataList=[],this.http.get(this.commonService.getAPI()+"/getSubjectsByCourseId/"+r).pipe((0,i.K)(this.errorService.serverError),(0,s.b)(e=>{this.newsDataList=e.data}))}fetchStudentNewsListReport(r){return this.http.post(this.commonService.getAPI()+"/getStudentNewsList",r).pipe((0,i.K)(this.errorService.serverError),(0,s.b)(e=>{console.log("at service newsDataList:",e),1===e.success&&this.newsDataList.unshift(e.data)}))}fetchStudentSyllabusListReport(r){return this.http.post(this.commonService.getAPI()+"/getStudentSyllabusList",r).pipe((0,i.K)(this.errorService.serverError),(0,s.b)(e=>{console.log("at service newsDataList:",e),1===e.success&&this.newsDataList.unshift(e.data)}))}fetchStudentOnlineClassList(r){return this.newsDataList=[],this.http.post(this.commonService.getAPI()+"/getStudentOnlineClassList",r).pipe((0,i.K)(this.errorService.serverError),(0,s.b)(e=>{console.log("at service newsDataList:",e),1===e.success&&this.newsDataList.unshift(e.data)}))}fetchStudentEbookList(r){return this.newsDataList=[],this.http.post(this.commonService.getAPI()+"/getStudentEbookList",r).pipe((0,i.K)(this.errorService.serverError),(0,s.b)(e=>{console.log("at service newsDataList:",e),1===e.success&&this.newsDataList.unshift(e.data)}))}fetchStudentQuestionPaperList(r){return this.http.post(this.commonService.getAPI()+"/getStudentQuestionPaperList",r).pipe((0,i.K)(this.errorService.serverError),(0,s.b)(e=>{console.log("at service newsDataList:",e),1===e.success&&this.newsDataList.unshift(e.data)}))}fetchStudentAssignmentListReport(r){return this.http.post(this.commonService.getAPI()+"/getStudentAssignmentList",r).pipe((0,i.K)(this.errorService.serverError),(0,s.b)(e=>{console.log("at service newsDataList:",e),1===e.success&&this.newsDataList.unshift(e.data)}))}onlinePaymentService(r){return this.http.post(this.commonService.getAPI()+"/phonepe",r).pipe((0,i.K)(this.errorService.serverError),(0,s.b)(e=>{console.log("at service phonepe:",e)}))}updateNewsStatus(r){return this.http.patch(this.commonService.getAPI()+"/updateNewsStatus",r).pipe((0,i.K)(this.errorService.serverError),(0,s.b)(e=>{console.log("at news status update",e),1===e.success&&this.newsDataList.unshift(e.data)}))}fetchNewsListReport(r){return this.http.get(this.commonService.getAPI()+"/getNewsList/"+r).pipe((0,i.K)(this.errorService.serverError),(0,s.b)(e=>{this.newsDataList=e.data}))}fetchSyllabusListReport(r){return this.newsDataList=[],this.http.get(this.commonService.getAPI()+"/getSyllabusList/"+r).pipe((0,i.K)(this.errorService.serverError),(0,s.b)(e=>{this.newsDataList=e.data}))}fetchAssignmentListReport(r){return this.newsDataList=[],this.http.get(this.commonService.getAPI()+"/getAssignmentList/"+r).pipe((0,i.K)(this.errorService.serverError),(0,s.b)(e=>{this.newsDataList=e.data}))}fetchEbookListReport(r){return this.newsDataList=[],this.http.get(this.commonService.getAPI()+"/getEbookList/"+r).pipe((0,i.K)(this.errorService.serverError),(0,s.b)(e=>{this.newsDataList=e.data}))}fetchOnlineClassReport(r){return this.newsDataList=[],this.http.get(this.commonService.getAPI()+"/getOnlineClassList/"+r).pipe((0,i.K)(this.errorService.serverError),(0,s.b)(e=>{this.newsDataList=e.data}))}fetchQuestionPaperListReport(r){return this.newsDataList=[],this.http.get(this.commonService.getAPI()+"/getQuestionPaperList/"+r).pipe((0,i.K)(this.errorService.serverError),(0,s.b)(e=>{this.newsDataList=e.data}))}saveNews(r){return this.http.post(this.commonService.getAPI()+"/saveNews",r).pipe((0,i.K)(this.errorService.serverError),(0,s.b)(e=>{console.log("at service newsDataList:",e),1===e.success&&this.newsDataList.unshift(e.data)}))}fetchAllReceiptIncomeReport(r){return this.http.get(this.commonService.getAPI()+"/getAllIncomeReport/"+r).pipe((0,i.K)(this.errorService.serverError),(0,s.b)(e=>{this.incomeReportList=e.data,this.incomeReportSubject.next([...this.incomeReportList]),console.log("all Income:",this.incomeReportList)}))}fetchWorkingDaysReport(r){return this.http.get(this.commonService.getAPI()+"/transactions/workingDays/"+r).pipe((0,i.K)(this.errorService.serverError),(0,s.b)(e=>{this.incomeReportList=e.data,this.incomeReportSubject.next([...this.incomeReportList])}))}fetchStudentBirthDayDaysReport(r){return this.http.get(this.commonService.getAPI()+"/reportStudentBirthday/"+r).pipe((0,i.K)(this.errorService.serverError),(0,s.b)(e=>{this.incomeReportList=e.data}))}fetchStudentUpcomingDueListReport(r){return this.http.get(this.commonService.getAPI()+"/reportUpcomingDueList/"+r).pipe((0,i.K)(this.errorService.serverError),(0,s.b)(e=>{this.incomeReportList=e.data}))}fetchStudentToCourseRegistrationReport(r){return this.http.get(this.commonService.getAPI()+"/reportStudentToCourseRegistrationList/"+r).pipe((0,i.K)(this.errorService.serverError),(0,s.b)(e=>{this.incomeReportList=e.data,this.incomeReportSubject.next([...this.incomeReportList])}))}fetchStudentToCourseRegistrationReportLedgerId(r){return this.http.get(this.commonService.getAPI()+"/reportStudentToCourseRegistrationListLedgerId/"+r).pipe((0,i.K)(this.errorService.serverError),(0,s.b)(e=>{this.incomeReportList=e.data,this.incomeReportSubject.next([...this.incomeReportList])}))}fetchAllIncomeReport(r){return this.http.post(this.commonService.getAPI()+"/getAllIncomeListReport",r).pipe((0,i.K)(this.errorService.serverError),(0,s.b)(e=>{this.incomeReportList=e.data,this.incomeReportSubject.next([...this.incomeReportList])}))}}return h.\u0275fac=function(r){return new(r||h)(g.LFG(S.v),g.LFG(t.T),g.LFG(R.eN))},h.\u0275prov=g.Yz7({token:h,factory:h.\u0275fac,providedIn:"root"}),h})()}}]);