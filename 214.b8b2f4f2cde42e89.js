"use strict";(self.webpackChunkadminDesign=self.webpackChunkadminDesign||[]).push([[214],{214:(H,v,n)=>{n.r(v),n.d(v,{ItemToServiceModule:()=>V});var p=n(6895),T=n(4364),s=n(4006),_=n(5226),c=n.n(_),t=n(4650),C=n(1710),Z=n(5620),h=n(9549),I=n(7392),d=n(3848),b=n(4144),g=n(8796),u=n(7466),x=n(805),f=n(5593),S=n(1740);function A(i,a){if(1&i&&(t.TgZ(0,"mat-icon",30),t._uU(1,"trending_up"),t.qZA(),t._uU(2," View Item To Service \xa0 "),t.TgZ(3,"span",31),t._uU(4),t.qZA()),2&i){const e=t.oxw();t.xp6(4),t.hij(" ",e.ItemList.length,"")}}function y(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",32)(1,"p-button",33),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.onClickAdd())}),t.qZA(),t.TgZ(2,"span",34),t._UZ(3,"i",35),t.TgZ(4,"input",36),t.NdJ("input",function(r){t.CHM(e);const l=t.oxw(),m=t.MAs(11);return t.KtG(m.filterGlobal(l.getEventValue(r),"contains"))}),t.qZA()()()}}function w(i,a){1&i&&(t.TgZ(0,"tr")(1,"th"),t._uU(2,"ID"),t.qZA(),t.TgZ(3,"th",37),t._uU(4,"Service Name "),t._UZ(5,"p-sortIcon",38),t.qZA(),t.TgZ(6,"th",39),t._uU(7,"Item Name "),t._UZ(8,"p-sortIcon",40),t.qZA(),t.TgZ(9,"th",41),t._uU(10,"Technical Name "),t._UZ(11,"p-sortIcon",42),t.qZA(),t.TgZ(12,"th"),t._uU(13,"Description"),t.qZA(),t.TgZ(14,"th",43),t._uU(15,"Edit "),t._UZ(16,"p-sortIcon",44),t.qZA(),t.TgZ(17,"th",45),t._uU(18,"Delete "),t._UZ(19,"p-sortIcon",46),t.qZA()())}function N(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td")(12,"p-button",47),t.NdJ("click",function(){const l=t.CHM(e).$implicit,m=t.oxw();return t.KtG(m.editItem(l))}),t.qZA()(),t.TgZ(13,"td")(14,"p-button",48),t.NdJ("click",function(){const l=t.CHM(e).$implicit,m=t.oxw();return t.KtG(m.deleteTeacher(l))}),t.qZA()()()}if(2&i){const e=a.$implicit;t.xp6(2),t.Oqu(e.id),t.xp6(2),t.Oqu(e.work_type_name),t.xp6(2),t.Oqu(e.item_name),t.xp6(2),t.Oqu(e.technical_name),t.xp6(2),t.Oqu(e.item_to_service_description)}}function k(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"button",49),t.NdJ("click",function(){t.CHM(e);const r=t.oxw(),l=t.MAs(11);return t.KtG(r.clear(l))}),t.qZA()}}function U(i,a){1&i&&(t.TgZ(0,"mat-icon",30),t._uU(1,"trending_up"),t.qZA(),t._uU(2," Item To Service Entry "))}function L(i,a){if(1&i&&t._uU(0),2&i){const e=a.item;t.AsE(" ",e.item_name," \xa0|Technical Name: (",e.technical_name,") ")}}function D(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"button",50),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.onUpdate())}),t._UZ(1,"i",51),t._uU(2,"\xa0 Update"),t.qZA()}}function F(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"button",52),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.onSave())}),t._UZ(1,"i",51),t._uU(2,"\xa0 Save"),t.qZA()}}const G=function(){return[5,10,25,50]},M=function(){return["id","item_name","work_type_name"]},J=[{path:"",component:(()=>{class i{constructor(e,o){this.customerService=e,this.commonService=o,this.stateList=[],this.organisationList=[],this.studentList=[],this.ItemList=[],this.workTypeList=[],this.itemToServiceList=[],this.showDiv=!1,this.isShown=!1,this.showDivStudentExists=!1,this.organisationName="",this.address="",this.city="",this.contactNumber="",this.emailId="",this.organisationPin="",this.emailMobileNoCheckNgModel="",this.successMessage=0,this.organisationId=0,this.studentData={},this.selectedIndex=0;const r=localStorage.getItem("user");r&&(this.UserID=JSON.parse(r).uniqueId,this.organisationId=JSON.parse(r).organisationId,console.log("user localUserID:",this.UserID),console.log("user organisationId:",this.organisationId)),this.getStateList(),this.getOrganisationList(),this.getAllItem(this.organisationId),this.getAllItemToService(this.organisationId),this.getAllWorkTypes(this.organisationId)}onTabChanged(e){console.log(e)}getEventValue(e){return e.target.value}clear(e){e.clear()}onClickAdd(){this.selectedIndex=1}editTeacher(e){}deleteTeacher(e){}onUpdate(){c().fire({title:"Are you sure?",text:"Update This Record...?",icon:"info",showCancelButton:!0,confirmButtonText:"Yes, Update it!",cancelButtonText:"No, keep it"}).then(e=>{e.isConfirmed?(this.studentData.itemToServiceId=this.itemToServceFormGroup.value.itemToServiceId,this.studentData.workTypeId=this.itemToServceFormGroup.value.workTypeId,this.studentData.itemId=this.itemToServceFormGroup.value.itemId,this.studentData.description=this.itemToServceFormGroup.value.description,this.studentData.organisationId=this.organisationId,this.customerService.updateItemToService(this.studentData).subscribe(o=>{1===o.success&&(c().fire({position:"top-end",icon:"success",title:"Item To Services has been saved",showConfirmButton:!1,timer:1500}),this.onClear(),console.log("Return Customer data:",o.data),this.selectedIndex=0,this.getAllItemToService(this.organisationId))},o=>{c().fire({icon:"error",title:"Oops...",text:o,footer:"<a href>Why do I have this issue?</a>",timer:0})})):e.dismiss===c().DismissReason.cancel&&c().fire("Cancelled","Your imaginary file is safe :)","error")})}editItem(e){console.log("ItemToService Details:",e),this.selectedIndex=1,this.isShown=!0,this.itemToServceFormGroup.patchValue({itemToServiceId:e.id}),this.itemToServceFormGroup.patchValue({itemId:e.item_id}),this.itemToServceFormGroup.patchValue({workTypeId:e.work_type_id}),this.itemToServceFormGroup.patchValue({description:e.item_to_service_description})}showDivClick(e){this.showDiv=!0,console.log("data:",e),this.organisationName=e.organisation_name,this.address=e.address,this.city=e.city,this.contactNumber=e.contact_number,this.emailId=e.email_id,this.organisationPin=e.pin}ngOnInit(){const e=new Date;(0,p.p6)(e,"yyyy-MM-dd","en"),this.itemToServceFormGroup=new s.cw({workTypeId:new s.NI(null,[s.kI.required]),itemId:new s.NI(null,[s.kI.required]),description:new s.NI(null),itemToServiceId:new s.NI(0)})}getStateList(){this.customerService.fetchAllStates().subscribe(e=>{this.stateList=e.data,console.log("stateList:",this.stateList)})}getOrganisationList(){this.organisationList=[],this.customerService.fetchAllOrganisaction().subscribe(e=>{this.organisationList=e.data,console.log("organisationList:",this.organisationList)})}getAllItem(e){this.customerService.fetchAllItem(this.organisationId).subscribe(o=>{this.ItemList=o.data,console.log("ItemList list:",this.ItemList)})}getAllItemToService(e){this.customerService.fetchAllItemToService(this.organisationId).subscribe(o=>{this.itemToServiceList=o.data,console.log("ItemList list:",this.ItemList)})}getAllWorkTypes(e){this.customerService.fetchAllWorkType(this.organisationId).subscribe(o=>{this.workTypeList=o.data,console.log("Work list:",this.workTypeList)})}onClear(){this.isShown=!1,this.itemToServceFormGroup=new s.cw({workTypeId:new s.NI(null,[s.kI.required]),itemId:new s.NI(null,[s.kI.required]),description:new s.NI(null),itemToServiceId:new s.NI(0)})}onSave(){c().fire({title:"Are you sure?",text:"Save This Record...?",icon:"info",showCancelButton:!0,confirmButtonText:"Yes, Save it!",cancelButtonText:"No, keep it"}).then(e=>{e.isConfirmed?(this.studentData.workTypeId=this.itemToServceFormGroup.value.workTypeId,this.studentData.itemId=this.itemToServceFormGroup.value.itemId,this.studentData.description=this.itemToServceFormGroup.value.description,this.studentData.organisationId=this.organisationId,this.customerService.saveItemToService(this.studentData).subscribe(o=>{1===o.success&&(c().fire({position:"top-end",icon:"success",title:"Item To Services has been saved",showConfirmButton:!1,timer:1500}),this.onClear(),console.log("Return Customer data:",o.data),this.selectedIndex=0,this.getAllItemToService(this.organisationId))},o=>{c().fire({icon:"error",title:"Oops...",text:o,footer:"<a href>Why do I have this issue?</a>",timer:0})})):e.dismiss===c().DismissReason.cancel&&c().fire("Cancelled","Your imaginary file is safe :)","error")})}onGo(e){console.log("test:",e.target.value),this.customerService.fetchCheckStudentExists(e.target.value).subscribe(r=>{this.studentList=r.data,this.successMessage=r.success,this.successMessage>0?(this.showDivStudentExists=!0,this.itemName=this.studentList[0].ledger_name,this.address=this.studentList[0].address,this.gurardainName=this.studentList[0].guardian_name,this.dob=this.studentList[0].dob,this.qualification=this.studentList[0].qualification,this.organisationName=this.studentList[0].organisation_name):this.showDivStudentExists=!1,console.log("studentList:",this.studentList),console.log("successMessage:",this.successMessage)})}sameAsWhatsAppNo(){this.itemToServceFormGroup.patchValue({contactNumber:this.itemToServceFormGroup.value.whatsappNumber})}setDOBSQL(e){this.itemToServceFormGroup.patchValue({dob:this.commonService.getSQLDate(e)})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(C.v),t.Y36(Z.v))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-item-to-service"]],decls:48,vars:14,consts:[[1,"container-fluid","page"],[1,"row","d-flex","align-items-center","justify-content-between"],[1,"col-12","header"],[1,"bi","bi-cash"],[1,"row"],[1,"col-12","mt-3","feeleft"],["animationDuration","200ms",2,"background-image","linear-gradient(to bottom right, rgb(8, 2, 68), rgb(7, 32, 146))","color","aliceblue","padding","12px","border-radius","5px","padding","0px",3,"selectedIndex","selectedTabChange","selectedIndexChange"],["mat-tab-label",""],["dataKey","id","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries","styleClass","p-datatable-gridlines",3,"value","paginator","rows","showCurrentPageReport","rowsPerPageOptions","globalFilterFields"],["itemToService",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","paginatorleft"],[3,"formGroup"],[2,"background-color","whitesmoke","padding","20px"],[1,"",2,"background-color","white"],[1,"col-sm-8"],["bindLabel","work_type_name","bindValue","id","formControlName","workTypeId","autofocus","","appendTo","body","placeholder","Service Name",1,"custom",3,"items"],["bindLabel","item_name","bindValue","id","formControlName","itemId","autofocus","","appendTo","body","placeholder","Item Name",1,"custom",3,"items"],["ng-option-tmp",""],[2,"width","100%"],[1,"bi","bi-geo-alt-fill"],["matInput","","placeholder","Description","formControlName","description"],[1,"col-sm-6","text-right"],["appearance","outline",2,"width","100%","display","none"],["matInput","","placeholder","id","formControlName","itemToServiceId",1,"custom"],["type","button","class","btn btn-primary",3,"click",4,"ngIf"],["type","button","class","btn btn-success",3,"click",4,"ngIf"],["type","button",1,"btn","btn-info",3,"click"],[1,"example-tab-icon"],[2,"height","20px","width","20px","border-radius","50%","background-color","red","border","1px solid red","font-weight","bolder"],[1,"flex"],["type","button","icon","pi pi-plus","label","ADD",1,"p-button-outlined",3,"click"],[1,"p-input-icon-left","ml-auto"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Search keyword",3,"input"],["pSortableColumn","work_type_name"],["field","work_type_name"],["pSortableColumn","item_name"],["field","item_name"],["pSortableColumn","technical_name"],["field","technical_name"],["pSortableColumn","edit"],["field","edit"],["pSortableColumn","delete"],["field","delete"],["type","button","icon","pi pi-pencil","styleClass","p-button-text",3,"click"],["type","button","icon","pi pi-trash","styleClass","p-button-text",3,"click"],["pButton","","label","Clear","icon","pi pi-filter-slash",1,"p-button-outlined",3,"click"],["type","button",1,"btn","btn-primary",3,"click"],[1,"bi","bi-save"],["type","button",1,"btn","btn-success",3,"click"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t._UZ(3,"i",3),t._uU(4,"\xa0 Item To Service Entry"),t.qZA()(),t.TgZ(5,"div",4)(6,"div",5)(7,"mat-tab-group",6),t.NdJ("selectedTabChange",function(l){return o.onTabChanged(l)})("selectedIndexChange",function(l){return o.selectedIndex=l}),t.TgZ(8,"mat-tab"),t.YNc(9,A,5,1,"ng-template",7),t.TgZ(10,"p-table",8,9),t.YNc(12,y,5,0,"ng-template",10),t.YNc(13,w,20,0,"ng-template",11),t.YNc(14,N,15,5,"ng-template",12),t.YNc(15,k,1,0,"ng-template",13),t.qZA()(),t.TgZ(16,"mat-tab"),t.YNc(17,U,3,0,"ng-template",7),t.TgZ(18,"form",14)(19,"div",15)(20,"div",16)(21,"div",4)(22,"div",17),t._UZ(23,"ng-select",18),t.qZA()(),t.TgZ(24,"div",4)(25,"div",17)(26,"ng-select",19),t.YNc(27,L,1,2,"ng-template",20),t.qZA()(),t.TgZ(28,"div",4)(29,"div",17)(30,"mat-form-field",21)(31,"mat-label"),t._UZ(32,"i",22),t._uU(33," \xa0 Description "),t.qZA(),t._UZ(34,"input",23),t.qZA()()(),t.TgZ(35,"div",4)(36,"div",24)(37,"mat-form-field",25)(38,"mat-label"),t._uU(39,"Item ID"),t.qZA(),t._UZ(40,"input",26),t.qZA()(),t.TgZ(41,"div",24),t.YNc(42,D,3,0,"button",27),t._uU(43,"\xa0\xa0 "),t.YNc(44,F,3,0,"button",28),t._uU(45,"\xa0\xa0 "),t.TgZ(46,"button",29),t.NdJ("click",function(){return o.onClear()}),t._uU(47,"\xa0 Clear"),t.qZA()()()()()()()()()()()()),2&e&&(t.xp6(7),t.Q6J("selectedIndex",o.selectedIndex),t.xp6(3),t.Q6J("value",o.itemToServiceList)("paginator",!0)("rows",5)("showCurrentPageReport",!0)("rowsPerPageOptions",t.DdM(12,G))("globalFilterFields",t.DdM(13,M)),t.xp6(8),t.Q6J("formGroup",o.itemToServceFormGroup),t.xp6(5),t.Q6J("items",o.workTypeList),t.xp6(3),t.Q6J("items",o.ItemList),t.xp6(16),t.Q6J("ngIf",o.isShown),t.xp6(2),t.Q6J("ngIf",o.itemToServceFormGroup.valid&&!o.isShown))},dependencies:[p.O5,h.KE,h.hX,I.Hw,d.SP,d.uD,d.uX,b.Nt,g.w9,g.ir,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u,u.iA,x.jx,u.lQ,u.fz,f.Hq,f.zx,S.o],styles:[".header[_ngcontent-%COMP%]{background-color:#f8f1d7;color:#b80707!important;padding:.5em 1em;font-size:1.5em;margin:0;font-family:Impact,Haettenschweiler,Arial Narrow Bold,sans-serif;font-size:xx-large}  .mat-step-header .mat-step-icon-selected,   .mat-step-header .mat-step-icon-state-done,   .mat-step-header .mat-step-icon-state-edit{background-color:#050505!important}  .mat-form-field-appearance-outline .mat-form-field-outline{color:#050505!important}  .custom{color:#050505!important;font-size:medium!important}  .mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick{color:#050505!important}  .mat-form-field-appearance-outline.mat-form-field-invalid.mat-form-field-invalid .mat-form-field-outline-thick{color:#050505!important;opacity:.8!important}  .mat-input-element{caret-color:#050505!important}  .mat-form-field-invalid .mat-input-element,   .mat-warn .mat-input-element{caret-color:#050505!important}  .mat-form-field-label{color:#787676!important;font-size:large!important}  .mat-form-field.mat-focused .mat-form-field-label{color:#050505!important}  .mat-form-field.mat-form-field-invalid .mat-form-field-label{color:#050505!important}    .mat-form-field .mat-input-element{color:#080808;font-size:medium}    .mat-form-field .mat-form-field-label{color:#0a0a0a;font-size:medium}    .mat-form-field .mat-form-field-underline{background-color:#04203b}    .mat-form-field .mat-form-field-ripple{background-color:#708090}    .mat-form-field .mat-form-field-required-marker{color:#be1509}    datepicker-value-example .mat-form-field-label{color:#43b2ee}    .mat-datepicker-toggle{color:#43b2ee}    .mat-form-field-underline{background:#43b2ee}  .organisation-details{font-size:medium;background-color:#f0e4791c;border-radius:10px;padding:10px;margin-bottom:10px}  .comname{font-size:2em;font-weight:800;letter-spacing:.1em;color:#100998}"]}),i})()}];let O=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[T.Bz.forChild(J),T.Bz]}),i})();var q=n(4850),E=n(6338),Y=n(8255),B=n(3683),z=n(9602),R=n(3238),P=n(5362),K=n(1167),Q=n(5121);let V=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[p.ez,O,h.lN,I.Ps,q.t,E.ie,Y.Tx,B.g0,d.Nh,b.c,g.A0,s.u5,s.UX,u.U$,f.hJ,S.j,z.FA,R.XK,P.Qy,K.KZ,Q.Z_]}),i})()}}]);